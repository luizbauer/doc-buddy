[<< Table of Contents](../index.md)

# AI Generated documentation for `doc-buddy/src/util.py`
---
The `src/util.py` file provides utility functions for the doc-buddy project.  These functions handle tasks such as path resolution, file reading, and AI provider initialization.

**Function: `get_absolute_path(file_path: str)`**

This function resolves the absolute path of a given file path. It takes into account the `USER_CWD` environment variable. If `USER_CWD` is set, it uses this value as the base directory for path resolution. Otherwise, it resolves the path relative to the current working directory.  The function utilizes the `pathlib` library for path manipulation and returns a resolved `Path` object.

**Function: `read_file(file_path: str, dry_run=False)`**

This function reads and prints the content of a file.  It takes the file path and an optional `dry_run` flag as arguments.  If `dry_run` is True, the function prints the absolute path of the file that *would* be read without actually reading it.  This is useful for debugging and testing.  If `dry_run` is False (the default), it reads and prints the file's content using UTF-8 encoding. Error handling is included to catch `FileNotFoundError` and other potential exceptions during file operations. The function makes a call to `get_absolute_path` to ensure the correct file is read, even when running in a Docker container.

**Function: `initialize_provider()`**

This function initializes the AI provider based on the `AI_PROVIDER` environment variable. It supports three providers: "GOOGLE-GEMINI", "GOOGLE-VERTEXAI", and "OPENAI". The function converts the environment variable to uppercase for case-insensitive comparison. Based on the provider name, it initializes the corresponding provider class from the `ai_provider` module using conditional logic. If the specified AI provider is not found or not supported, an error message is displayed, and the script exits. The initialized AI provider object is then returned, enabling the program to utilize the AI capabilities provided by the selected provider.

# Full listing of src/util.py
```python
"""
This module contains utility functions that are used by the main script.
"""

import os
import sys
from pathlib import Path
from ai_provider.open_ai_provider import OpenAIProvider
from ai_provider.google_gen_ai_provider import GoogleGenAIProvider
from ai_provider.vertexai_ai_provider import VertexAIProvider


def get_absolute_path(file_path: str):
    """
    Returns the absolute path of the file, taking into account the USER_CWD
    environment variable.  If USER_CWD is set, it uses that as the base
    directory; otherwise, it resolves the file path from the current working
    directory.
    """
    user_cwd = os.getenv("USER_CWD")

    if user_cwd:
        base_path = Path(user_cwd).resolve()
        absolute_path = (base_path / file_path).resolve()
    else:
        absolute_path = Path(file_path).resolve()

    return absolute_path


def read_file(file_path: str, dry_run=False):
    """
    Reads the content of the file at the given path.
    If the dry_run flag is set, it only prints the file path and does not read the file.
    """
    # Get the absolute path using the separate function
    absolute_path = get_absolute_path(file_path)

    if dry_run:
        print(f"Dry run: Would read file '{absolute_path}'")
        return

    try:
        with open(absolute_path, "r", encoding="utf-8") as file:
            content = file.read()
            print(content)

    except FileNotFoundError:
        print(f"Error: File '{absolute_path}' not found.")
    except Exception as e:
        print(f"Error: {e}")


def initialize_provider():
    """
    Initialize the AI provider.
    """

    provider_name = os.getenv("AI_PROVIDER").upper()

    # should work uppercase and lowercase, convert to uppercase
    if provider_name == "GOOGLE-GEMINI":
        print("-> Using Google Gemini AI provider")
        provider = GoogleGenAIProvider()

    elif provider_name == "GOOGLE-VERTEXAI":
        print("-> Using Google Vertex AI provider")
        provider = VertexAIProvider()

    elif provider_name == "OPENAI":
        print("-> Using OpenAI provider")
        provider = OpenAIProvider()

    else:
        print("Error: AI provider not found.")
        sys.exit(1)

    return provider

```
<br>
<br>


---
### Automatically generated Documentation for `doc-buddy/src/util.py`
This documentation is generated automatically from the source code. Do not edit this file directly.
Generated by **Doc-Buddy** on **November 20, 2024 15:10:23** via **gemini-1.5-pro-002**

For more information, visit the [Doc-Buddy on GitHub](https://github.com/scott-r-lindsey/doc-buddy).  
*doc-buddy Commit Hash: 95d11f067c1bbf87e1127584466814b22ed990f2*
