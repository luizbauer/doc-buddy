[<< Table of Contents](../../index.md)

# AI Generated documentation for `doc-buddy/src/document/generate_toc.py`
---
# `generate_toc.py`

This module is responsible for generating the main Table of Contents (TOC) file (`index.md`) for the project's documentation.  It assembles the header, body (containing the file tree), and footer of the TOC.

**Functions:**

* **`generate_toc(files)`:** This is the main function of the module. It orchestrates the creation of the TOC file.

    * It calls `find_name()` to determine the project's name.
    * It calls `generate_header(name)` to create the header section of the TOC.
    * It calls `render_tree_html(files, config.documentation_suffix)` (from the `file` module) to generate the HTML representation of the file tree, forming the body of the TOC. The `files` argument is a list of file paths, and `config.documentation_suffix` specifies the file extension used for documentation files.
    * It calls `generate_footer(name, True)` (from `generate_footer` module) to create the footer, passing the project name and setting the `is_index` flag to `True` to indicate that this is the main index file.
    * Finally, it writes the combined header, body, and footer to the `index.md` file in the output directory specified by `config.output_path`.

* **`generate_header(name)`:** This function creates the header section of the TOC.

    * It retrieves the current date and time.
    * It constructs the header string, including the project name and a warning against directly editing the auto-generated file.

* **`find_name()`:**  This function determines the project's name.

    * It checks the `config.gitmode` setting. If enabled (meaning the project is assumed to be a Git repository), it extracts the base name of the root path (`config.root_path`) to use as the project name.
    * If `config.gitmode` is disabled, it uses the base name of the current working directory as the project name.

**Dependencies:**

* **`os`:**  Used for path manipulation and retrieving the current working directory.
* **`datetime`:** Used to get the current date and time for the header.
* **`file.render_tree_html`:** Used to generate the HTML representation of the documentation file tree.
* **`config`:**  Used to access configuration settings such as `output_path`, `documentation_suffix`, `root_path`, and `gitmode`.
* **`generate_footer.generate_footer`:** Used to generate the footer for the documentation.



Key Logic:

The core logic revolves around assembling the different parts (header, file tree, footer) of the TOC and writing them to the `index.md` file.  The project name is dynamically determined based on whether Git mode is enabled. The `render_tree_html` function handles the crucial task of generating the navigable file tree structure within the documentation.

# Full listing of src/document/generate_toc.py
```{'python'}
"""
This module generates the Table of Contents (TOC) for the documentation.
"""

import os
from datetime import datetime
from file import render_tree_html
from config import config
from .generate_footer import generate_footer


def generate_toc(files):
    """
    Generates the Table of Contents (TOC) for the documentation.
    """
    name = find_name()
    header = generate_header(name)
    body = render_tree_html(files, config.documentation_suffix)
    footer = generate_footer(name, True)

    path = str(config.output_path) + os.sep + "index.md"
    with open(path, "w", encoding="utf-8") as f:
        f.write(header)
        f.write(body)
        f.write(footer)


def generate_header(name):
    """
    Generates the header for the Table of Contents (TOC).
    """
    date = datetime.now().strftime("%Y-%m-%d %H:%M:%S")

    header = f"# Auto-generated Documentation for `{name}`\n"
    header += "This documentation is generated automatically from the source code. "
    header += "Do not edit this file directly.\n"

    return header


def find_name():
    """
    Finds the name of the project.
    """
    if config.gitmode:
        return os.path.basename(config.root_path)

    return os.path.basename(os.getcwd())

```
<br>
<br>


---
### Automatically generated Documentation for `doc-buddy/src/document/generate_toc.py`
This documentation is generated automatically from the source code. Do not edit this file directly.
Generated by **Doc-Buddy** on **November 09, 2024 18:53:25** via **gemini-1.5-pro-002**

For more information, visit the [Doc-Buddy on GitHub](https://github.com/scott-r-lindsey/doc-buddy).  
*doc-buddy Commit Hash: e4f5dcb09e20896907179c4446f269d9f1c93dd8*
