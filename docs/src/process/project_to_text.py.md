## Documentation for `/var/www/html/scott/doc-buddy/src/process/project_to_text.py`

This script defines the `ProjectToText` class, which is responsible for converting a project directory into a plain text representation.  This text representation can then be used for further processing, such as generating documentation or performing analysis. The script utilizes the `os` module for file system navigation and the `pathlib` module for path manipulation.

```python
import os
from pathlib import Path

class ProjectToText:
    def __init__(self, project_path):
        self.project_path = project_path

    def convert(self):
        text = ""
        for root, _, files in os.walk(self.project_path):
            relative_path = os.path.relpath(root, self.project_path)
            text += f"\n# Directory: {relative_path}\n\n"

            for file in files:
                file_path = os.path.join(root, file)
                try:
                    with open(file_path, 'r', encoding='utf-8') as f:
                        file_content = f.read()
                        text += f"## File: {file}\n\n```\n{file_content}\n```\n\n"
                except UnicodeDecodeError:
                    text += f"## File: {file}\n\n```\n[Binary File - Could not decode]\n```\n\n"
                except Exception as e:
                    text += f"## File: {file}\n\n```\n[Error reading file: {e}]\n```\n\n"
        return text


```

**Class: `ProjectToText`**

This class encapsulates the logic for converting a project directory to text.

* **`__init__(self, project_path)`:**
    * Constructor for the class.
    * Takes the `project_path` (a string representing the path to the project directory) as an argument and stores it in the `self.project_path` instance variable.

* **`convert(self)`:**
    * This is the core method of the class. It traverses the project directory structure and concatenates the content of each file into a single string.
    * Uses `os.walk(self.project_path)` to recursively traverse the project directory.  `os.walk` yields tuples of (root directory, list of subdirectories, list of files) for each directory it encounters.
    * `relative_path = os.path.relpath(root, self.project_path)` calculates the relative path of the current directory (`root`) with respect to the project's root directory (`self.project_path`).  This ensures the output shows the directory structure relative to the project root.
    * Appends a markdown-style heading indicating the current directory to the `text` string.
    * Iterates through each `file` within the current directory.
    * Constructs the full `file_path` using `os.path.join(root, file)`.
    * Uses a `try-except` block to handle potential errors during file reading:
        * **`UnicodeDecodeError`:**  If a file cannot be decoded using UTF-8, a message indicating it's a binary file is appended to the output.
        * **`Exception`:** Catches any other exceptions during file reading and appends an error message to the output.
    * If the file is successfully opened and read:
        * Appends a markdown-style heading for the file name.
        * Encloses the file content within a markdown code block (using triple backticks).
    * Returns the final `text` string containing the concatenated content of all files and directory structure information.



**Example Usage:**

```python
converter = ProjectToText("/path/to/my/project")
text_representation = converter.convert()
print(text_representation) # Or save to a file
```

This would create a `ProjectToText` object, convert the specified project directory to text, and then print the resulting text to the console.  You could then save this text to a file or process it further.


This script provides a robust way to convert a project directory into a textual representation, handling various file types and potential errors during file I/O. The use of relative paths and markdown formatting makes the output more organized and readable.


---
# Auto-generated Documentation for project_to_text.py
This documentation is generated automatically from the source code. Do not edit this file directly.
Generated by Doc-Buddy on 2024-11-09 11:32:55

Git Hash: <built-in method strip of str object at 0x7fbac58ef8d0>
