[<< Table of Contents](../index.md)

# AI Generated documentation for `doc-buddy/src/util.py`
---
# src/util.py

This module provides utility functions for the `doc-buddy` project, handling file operations and initializing AI providers.

## Functions

### `get_absolute_path(file_path: str)`

This function resolves the absolute path of a given file path.  It prioritizes the `USER_CWD` environment variable. If `USER_CWD` is set, the function uses it as the base directory to resolve the `file_path`. Otherwise, it resolves the `file_path` relative to the current working directory. This allows flexibility in specifying file paths, either relative to a user-specified directory or the current execution context. The function returns a `Path` object representing the absolute path.

### `read_file(file_path: str, dry_run=False)`

This function reads and prints the content of a file. It takes the `file_path` as input and an optional `dry_run` flag. If `dry_run` is True, the function only prints the absolute path of the file without actually reading its contents.  This is useful for testing or previewing the actions without modifying any data. In a non-dry-run scenario, it opens the file in read mode (`"r"`) with UTF-8 encoding and prints its content to the console.  It includes error handling for `FileNotFoundError` and other potential exceptions during file operations. The function utilizes `get_absolute_path` to determine the absolute file path before attempting to open the file.

### `initialize_provider()`

This function initializes the AI provider based on the `AI_PROVIDER` environment variable. It supports "GOOGLE-GEMINI", "GOOGLE-VERTEXAI", and "OPENAI" providers.  The function retrieves the value of `AI_PROVIDER`, converts it to uppercase, and then checks it against the supported provider names.  Based on the environment variable's value, it instantiates the corresponding provider class (e.g., `GoogleGenAIProvider`, `VertexAIProvider`, or `OpenAIProvider`). It prints an informative message indicating the selected provider. If the `AI_PROVIDER` environment variable is not set or contains an unsupported value, it prints an error message and exits the program with a status code of 1, indicating an error.  The function returns the initialized AI provider object.

# Full listing of src/util.py
```{'python'}
"""
This module contains utility functions that are used by the main script.
"""

import os
import sys
from pathlib import Path
from ai_provider.open_ai_provider import OpenAIProvider
from ai_provider.google_gen_ai_provider import GoogleGenAIProvider
from ai_provider.vertexai_ai_provider import VertexAIProvider


def get_absolute_path(file_path: str):
    """
    Returns the absolute path of the file, taking into account the USER_CWD
    environment variable.  If USER_CWD is set, it uses that as the base
    directory; otherwise, it resolves the file path from the current working
    directory.
    """
    user_cwd = os.getenv("USER_CWD")

    if user_cwd:
        base_path = Path(user_cwd).resolve()
        absolute_path = (base_path / file_path).resolve()
    else:
        absolute_path = Path(file_path).resolve()

    return absolute_path


def read_file(file_path: str, dry_run=False):
    """
    Reads the content of the file at the given path.
    If the dry_run flag is set, it only prints the file path and does not read the file.
    """
    # Get the absolute path using the separate function
    absolute_path = get_absolute_path(file_path)

    if dry_run:
        print(f"Dry run: Would read file '{absolute_path}'")
        return

    try:
        with open(absolute_path, "r", encoding="utf-8") as file:
            content = file.read()
            print(content)

    except FileNotFoundError:
        print(f"Error: File '{absolute_path}' not found.")
    except Exception as e:
        print(f"Error: {e}")


def initialize_provider():
    """
    Initialize the AI provider.
    """

    provider_name = os.getenv("AI_PROVIDER").upper()

    # should work uppercase and lowercase, convert to uppercase
    if provider_name == "GOOGLE-GEMINI":
        print("-> Using Google Gemini AI provider")
        provider = GoogleGenAIProvider()

    elif provider_name == "GOOGLE-VERTEXAI":
        print("-> Using Google Vertex AI provider")
        provider = VertexAIProvider()

    elif provider_name == "OPENAI":
        print("-> Using OpenAI provider")
        provider = OpenAIProvider()

    else:
        print("Error: AI provider not found.")
        sys.exit(1)

    return provider

```
<br>
<br>


---
### Automatically generated Documentation for `doc-buddy/src/util.py`
This documentation is generated automatically from the source code. Do not edit this file directly.
Generated by **Doc-Buddy** on **November 09, 2024 18:54:55** via **gemini-1.5-pro-002**

For more information, visit the [Doc-Buddy on GitHub](https://github.com/scott-r-lindsey/doc-buddy).  
*doc-buddy Commit Hash: e4f5dcb09e20896907179c4446f269d9f1c93dd8*
