[<< Table of Contents](../../index.md)

# AI Generated documentation for `doc-buddy/src/ai_provider/ai_provider.py`
---
AI Provider Base Class

This file (`src/ai_provider/ai_provider.py`) defines the base class for an AI provider within the `doc-buddy` project.  It uses abstract methods to ensure that specific provider implementations adhere to a common interface.

**Class: `AIProvider`**

This abstract base class serves as a blueprint for all AI providers.  It enforces the implementation of the `document_file` method in concrete subclasses.

*   **`document_file(self, file_name: str, project_path: str, file_contents: str)`**:

    This abstract method is the core functionality of any AI provider.  It takes the file name, project path, and file contents as input. Each specific AI provider implementation (e.g., one using OpenAI, another using Cohere) must define how to use this information to document the given file.  The expected return value is a document ID, which presumably refers to a unique identifier for the generated documentation.

*   **`generate_prompt(self, file_name: str, project_path: str, file_contents: str)`**:

    This method generates the prompt that will be sent to the AI model. It constructs a prompt string, incorporating the file name, project path, and file contents.

    The function first checks for a custom prompt template defined by the environment variable `AI_PROMPT`.  If this environment variable is set, it formats the template using the provided file information.  Placeholders like `{file_name}`, `{project_path}`, and `{file_contents}` within the custom prompt template are replaced with the actual values.

    If no custom prompt template is found, it uses a default prompt.  This default prompt instructs the AI to create documentation for the specified file, including explanations of functions, classes, and key logic. It also explicitly asks the AI not to wrap the output in a code block and not to start the document with a heading.

    Finally, the method returns the generated prompt, ready to be used with a specific AI provider's API. This approach allows for flexible prompt engineering by either utilizing a pre-defined structure or customizing the prompt through an environment variable.  The use of a default prompt ensures functionality even if no custom prompt is provided.  The configuration for the project name is imported from a `config` module and included in the prompt.

# Full listing of src/ai_provider/ai_provider.py
```python
"""
This file contains the base class for an AI provider.
"""

import os
from abc import ABC, abstractmethod


class AIProvider(ABC):
    """
    Base class for an AI provider. Extend this class to add support for other providers.
    """

    @abstractmethod
    def document_file(self, file_name: str, project_path: str, file_contents: str):
        """
        Document a file.
        :param file_name: The name of the file.
        :param project_path: The path to the project.
        :param file_contents: The contents of the file.
        :return: The document ID.
        """

    def generate_prompt(self, file_name: str, project_path: str, file_contents: str):
        """
        Generate a prompt for the user to provide documentation for a file.
        :return: The prompt.
        """
        from config import config

        custom_prompt_template = os.getenv("AI_PROMPT")

        # Default prompt if no custom prompt is provided
        default_prompt = (
            f"Please create a document which explains the following file:\n"
            f"File Path: {project_path}/{file_name}\n"
            f"Project Name: {config.project_name}\n"
            f"Make sure to include explanations for all functions, classes, and key"
            f" logic in the file. Do not wrap the output in a code block.\n\n"
            f"Do not start your document with a heading; one will automatically be added.\n"
            f"File Contents:\n{file_contents}\n\n"
        )

        # If a custom prompt template is provided, use it with variable substitution
        if custom_prompt_template:
            prompt = custom_prompt_template.format(
                file_name=file_name,
                project_path=project_path,
                file_contents=file_contents,
            )
        else:
            prompt = default_prompt

        return prompt

```
<br>
<br>


---
### Automatically generated Documentation for `doc-buddy/src/ai_provider/ai_provider.py`
This documentation is generated automatically from the source code. Do not edit this file directly.
Generated by **Doc-Buddy** on **November 09, 2024 19:42:59** via **gemini-1.5-pro-002**

For more information, visit the [Doc-Buddy on GitHub](https://github.com/scott-r-lindsey/doc-buddy).  
*doc-buddy Commit Hash: b01f9573f01b626efe9b415f7392e374029af615*
